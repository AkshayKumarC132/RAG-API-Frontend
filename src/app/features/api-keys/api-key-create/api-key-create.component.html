<div class="container mt-4">
  <h2>Create API Key</h2>
  <form (ngSubmit)="createApiKey()" class="mt-3">
    <div class="mb-3">
      <label for="provider" class="form-label">Provider</label>
      <select
        id="provider"
        class="form-select"
        [(ngModel)]="selectedProvider"
        name="provider"
      >
        <option *ngFor="let provider of providers" [value]="provider">
          {{ provider }}
        </option>
      </select>
    </div>
    <div class="mb-3">
      <label for="apiKeyName" class="form-label">Name (Optional)</label>
      <input
        type="text"
        id="apiKeyName"
        class="form-control"
        [(ngModel)]="apiKeyName"
        name="apiKeyName"
        placeholder="Enter a name for the API key"
      />
    </div>
    <div class="mb-3" *ngIf="isApiKeyRequired()">
      <label for="apiKeyString" class="form-label">API Key</label>
      <input
        type="text"
        id="apiKeyString"
        class="form-control"
        [(ngModel)]="apiKeyString"
        name="apiKeyString"
        placeholder="Enter the API key"
        [required]="isApiKeyRequired()"
      />
    </div>
    <div class="mb-3">
      <label class="form-label">
        <input type="checkbox" [(ngModel)]="is_active" name="is_active" />
        Make Active
      </label>
    </div>
    
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="isLoading"
    >
      <span
        *ngIf="isLoading"
        class="spinner-border spinner-border-sm me-2"
        role="status"
        aria-hidden="true"
      ></span>
      {{ isLoading ? 'Creating...' : 'Create API Key' }}
    </button>
  </form>
</div>
